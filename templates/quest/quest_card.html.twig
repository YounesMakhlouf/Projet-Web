<div class="card">
    <div class="card-body">
        <h2 class="card-title">{{ quest.name }}</h2>
        <p class="card-text">{{ quest.description }}</p>
        <p class="card-text d-flex justify-content-between quest-details">
            <span class="quest-points">Points: <strong>{{ quest.points }}</strong></span>
            <span class="quest-type"><em>{{ quest.type }}</em></span>
        </p>
        {% if quest.users|length == 0 %}
            <p class="card-text quest-completion">No one has completed this quest yet</p>
        {% else %}
            <p class="card-text quest-completion">{{ quest.users|length }} people completed this quest</p>
        {% endif %}
        {% set progress = questCompletionService.calculateQuestProgress(quest, app.user) %}
        {% if progress >= 100 %}
            {% set epicMessages = [
                "Congratulations, mighty warrior! You have conquered this epic quest!",
                "Hail, noble adventurer! Your valor and skill have triumphed in this grand quest!",
                "Well done, oh mighty hero! The realm rejoices in your victory!",
                "By the power of the ancients! You have completed this quest with glorious success!",
                "In the annals of legend, your name shall forever be inscribed! Quest completed!"
            ] %}
            {% set randomIndex = random(0, epicMessages|length - 1) %}
            <p class="card-text congratulation">{{ epicMessages[randomIndex] }}</p>
        {% else %}
            <div class="progress">
                <div class="progress-bar progress-bar-striped progress-bar-animated"
                     role="progressbar" aria-label="Quest progress"
                     style="width: {{ progress }}%;" aria-valuenow="{{ progress }}"
                     aria-valuemin="0" aria-valuemax="100">
                    {{ progress }}%
                </div>
            </div>
        {% endif %}
    </div>
</div>