{% extends 'base.html.twig' %}

{% block title %}CompletedStory!{% endblock %}

{% block body %}
    <body>
            <div class="theme ">

            </div>
            <div class="page-content">

            {#likes#}

                <div class="row">
                    <div class="col-1" id="fixed">
                            <i id="color" class="
                            {% if hasLiked %}fa-solid
                            {% else%}
                            fa-regular
                            {% endif%}
                                fa-heart fa-2xl"
                                data-story-id="{{ path('app_like', {'id': story.id}) }}" style="color: #d31717;"></i>
                        <div id="likes">{{ story.likes|length }}</div>

                    </div>

{#            title        #}

                <div  class="text col-8" >
                    <div class="title">
                        <h1>{{ story.title }}</h1>
                    </div>

                    {% for contribution in story.contributions %}
                            <p id="{{ contribution.author.id }}">{{ contribution.content }}</p>
                    {% endfor%}


                </div>

            <span  class="authors ">
                <h5>Contributors</h5>
                {% for contribution in story.contributions %}
                        <a href='{{ path('app_profile',{id:contribution.author.id}) }}'>
                    {{ contribution.author.username }}
                    </a>
                        <hr>
                {% endfor %}

        </span>
    </div>
                <div class="text-box">
                    <a href="#" class="btn btn-white btn-animate">Be part of the story - Contribute now!</a>
                </div>
            </div>



{#            comment section #}


            <div id="comment_section" class="col-8">
                <div class="be-comment-block">
                    <h1 class="comments-title" id="comment-count">Comments ({{ story.comments|length }})</h1>
                    {% for comment in story.comments %}
                        {% if comment.comment is null %}
                    <div class="be-comment">
                        <div class="be-img-comment">
                            <a href="">
                                <img src="https://www.bootdey.com/image/400x150/FFB6C1/000000" alt="" class="be-ava-comment">
                            </a>
                        </div>
                        <div class="be-comment-content">

				<span class="be-comment-name">
					<a href="">{{ comment.author.username }}</a>
					</span>
                            <span class="be-comment-time">
					            <i class="fa fa-clock-o"></i>
                                {{ comment.createdat|date('d-m-Y') }}
                            </span>
                            <div id="comments_section">
                            <p class="be-comment-text">
                                {{ comment.content }}
                            </p>
                            </div>
                        </div>
                    </div>
                        {% endif %}
{#                        reply#}

                        {% for reply in comment.replies%}
                            <div id="reply" class="row">
                            <div class="icon col-12">
                                <i id="arrow" class="fa-solid fa-arrow-right" style="color: #5c5e60;"></i>
                                <a> Show replies</a>
                            </div>
                            </div>
                        <div class="reply row" style="display:none;">
                        <div class="be-comment col-8 ">
                            <div class="be-img-comment">
                                <a href="">
                                    <img src="https://www.bootdey.com/image/400x150/FFB6C1/000000" alt="" class="be-ava-comment">
                                </a>
                            </div>
                            <div class="be-comment-content">
				<span class="be-comment-name">
					<a href="">{{ reply.author.username }}</a>
					</span>
                                <span class="be-comment-time">
					            <i class="fa fa-clock-o"></i>
                                {{ reply.createdat|date('d-m-Y') }}
                            </span>
                                <p class="be-comment-text">
                                    {{ reply.content }}
                                </p>
                            </div>
                        </div>
                        </div>

                        {% endfor %}
                    {% endfor %}
                    {{ form_start(form,{'action': path('app_storypage', {'id':story.id}),
                        'attr': {'id': 'comment-form'}}) }}
                     <div class="row">
                    {{ form_widget(form.content,{'attr':{'class':'form-input col-8', 'placeholder':'add your comment'}}) }}
                         <button class="col-1" type="submit">
                             <i class="fa-solid fa-paper-plane fa-2xl" style="color:#5BA199;"></i>
                         </button>

                     </div>
                    {{ form_end(form) }}
                </div>
            </div>

        <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
    </body>
    {% endblock %}

 {% block stylesheets %}
     {{ parent() }}
     {{ encore_entry_link_tags('completed') }}
     <link href="node_modules/bootstrap/dist/css/bootstrap.css"
 {% endblock %}
 {% block javascripts %}
     {{ parent() }}
     {{ encore_entry_script_tags('completed') }}

 {% endblock %}

